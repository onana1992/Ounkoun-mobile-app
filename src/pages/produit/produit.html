<ion-header>

	<ion-navbar color="header-color">
	    <ion-title><span style=" font-size:16px;">{{produitName}}</span></ion-title>
		<ion-buttons right>
		  <button ion-button icon-only (click)="openFavoris()" ><span style="font-size:16px;"><ion-icon name="heart"></ion-icon></span><sup style="margin-left:-9px;margin-top:-7px;"><span style="background-color:orange; min-height:5px; min-width:5px; border-radius:60%;padding:5px; font-size:7px;" > <span style="position:relative;top:1px;font-size:8px;">{{favorisSize}}</span></span > </sup> 
		  </button>
		  <button ion-button icon-only (click)="openPanier()"><span style="font-size:16px;"><ion-icon name="cart" ></ion-icon></span><sup style="margin-left:-9px;margin-top:-7px;"><span style="background-color:orange; min-height:5px; min-width:5px; border-radius:60%;padding:5px; font-size:7px;" > <span style="position:relative;top:1px;font-size:8px;">{{panierSize}}</span></span > </sup>
		  </button>

			<button ion-button icon-only (tap)=" presentPopover($event)" ><ion-icon name="more"></ion-icon>
			</button>
	    </ion-buttons>
	</ion-navbar>

</ion-header>

<div style="text-align:center;" *ngIf="showMessageAjoutFavori">
	<ion-row  class="info-favori">
		<ion-col col-12 >
			Le produit a été ajouté avec succès dans vos favoris
		</ion-col>
		<ion-col col-12 style="text-align:center;margin-top:-10px;font-size:10px;">
			<button ion-button round color="costom-orange" (click)="openFavoris()"  ><span  style="text-align:center;margin-top:0px;font-size:10px;">Voir vos favoris</span>
			</button>
		</ion-col>
	</ion-row>
</div>

<div style="text-align:center;" *ngIf="showMessageAjoutPanier">
	<ion-row  class="info-panier">
		<ion-col col-12 >
			Le produit a été ajouté avec succès dans votre panier
		</ion-col>
		<ion-col col-12 style="text-align:center;margin-top:-10px;font-size:10px;">
			<button ion-button round  color="costom-orange" ><span  style="text-align:center;margin-top:0px;font-size:10px;">Voir votre panier</span>
			</button>
		</ion-col>
	</ion-row>
</div>


<ion-content>

	<div *ngIf="isLoading">
		<ion-row >
			<ion-col style="text-align:center;margin-top:30px;">
				Chargement  du produit,veuillez patienter ...
				<img src="assets/imgs/loading.gif" height="80%" width="80%">
			</ion-col>
		</ion-row>
	</div>

	<div *ngIf="!isLoading">
		<ion-row padding style="color:gray;font-size:12px; padding-top:10px;padding-bottom:0px;color:#416998;" (click)="openMarque(produit.marque.name)">{{produit.marque.name}} 
		</ion-row>

		<ion-row  padding style="font-size:18px;padding-top:0px;padding-bottom:0px;">           {{produit.name}} 
		</ion-row>

		<ion-row padding style=" color:gray;margin-top:-15px;">
			<span style="font-size: 14px; "> partager cet article sur </span>				
		</ion-row>

			
		<ion-row padding style=" color:gray;margin-top:-32px;">	 	 
			 	
			<span style="margin-right: 15px;"> 
			 	<a (click)="shareFacebook($event)"> 
			 		<ion-icon style="font-size: 20px;color: #3b5998;" name="logo-facebook"></ion-icon>		
			 	</a>
			</span>

			<span style="margin-right: 15px;"> 
				<a (click)="shareTwitter($event)"> 
					<ion-icon style="font-size: 20px; color: #2ba9e1;" name="logo-twitter"></ion-icon> 	
				</a>
			</span>

			<span> 
				<a  (click)="shareLinkedIn($event)" class="linkicon">
					<ion-icon style="font-size: 20px; color: #007bb6;" name="logo-linkedin"></ion-icon>
				</a>	
			</span>

		</ion-row>

		<ion-row padding  style="color:#007bb6;">
			<ion-col  col-12 style="text-align:right; font-size:20px; margin-top: -80px; " >
				<ion-icon name="heart" (click)="addFavorite(produit)" ></ion-icon> 
			</ion-col >
		</ion-row>	
     

		<ion-row>
			<ion-slides autoplay="3000" loop="true">
				<ion-slide>
					<img imageViewer src="assets/imgs/produit1.jpg" [src]="baseUrl+'image/'+produit.idBigImage1" style="height:220px;"/>
				</ion-slide>
				<ion-slide *ngIf="produit.idBigImage2!='null'">
					<img imageViewer src="assets/imgs/produit1.jpg" [src]="baseUrl+'image/'+produit.idBigImage2" style="height:220px;"/>
				</ion-slide>
				<ion-slide *ngIf="produit.idBigImage3!='null'">
					<img imageViewer src="assets/imgs/produit1.jpg" [src]="baseUrl+'image/'+produit.idBigImage3" style="height:220px;" />
				</ion-slide>
				<ion-slide imageViewer *ngIf="produit.idBigImage4!='null'">
					<img src="assets/imgs/produit1.jpg" [src]="baseUrl+'image/'+produit.idBigImage4" style="height:220px;" />
				</ion-slide>
			</ion-slides>
		</ion-row>

		<ion-row><br/>	
			<ion-col offset-2 col-8>
				<ion-row>
					<ion-col col-2 style=" border: 1px solid gray; width:40px; height:50px; margin-left:10px; text-align:center;"><img src="assets/imgs/produit1.jpg" [src]="baseUrl+'image/'+produit.idBigImage1" style="height:40px;width:40px;"/>
					</ion-col>
					<ion-col col-2 *ngIf="produit.idBigImage2!='null'" style=" border: 1px solid gray; width:50px; height:50px; margin-left:10px; text-align:center;"><img src="assets/imgs/produit1.jpg" [src]="baseUrl+'image/'+produit.idBigImage2" style="height:40px;width:40px;"/>
					</ion-col>
					<ion-col col-2 *ngIf="produit.idBigImage3!='null'" style=" border: 1px solid gray; width:50px; height:50px; margin-left:10px; text-align:center;"><img src="assets/imgs/produit1.jpg" [src]="baseUrl+'image/'+produit.idBigImage3" style="height:40px;width:40px;"/>
					</ion-col>
					<ion-col col-2 *ngIf="produit.idBigImage4!='null'" style=" border: 1px solid gray; width:50px; height:50px; margin-left:10px; text-align:center;"><img src="assets/imgs/produit1.jpg" [src]="baseUrl+'image/'+produit.idBigImage4" style="height:40px;width:40px;"/>
					</ion-col>
				</ion-row>
			</ion-col>
		</ion-row><br/>

		<ion-row style="background-color: white;border-top:1px solid gray; margin-bottom: 10px;">

			<ion-col col-12 style=" margin-bottom: 0px; padding-bottom: 0px;" >
				<p style="font-size: 10px; font-weight: bold; margin-top: 0px;text-align: center;">
					NOUS SOMMES TOUJOURS AU BOUT DU FILS POUR VOUS AIDER A PASSER VOTRE COMMANDE
				</p>
			</ion-col>

			<ion-col col-3 style=" border: 1px solid white; text-align: center;background-color: #333;"  >
						<a style="text-decoration: none; font-size: 14px;" href="tel:+237699494380">	
							<ion-icon ios="ios-call" md="md-call"></ion-icon>
						</a>
			</ion-col>

			<ion-col col-3 style="text-align: center; border: 1px solid white; background-color: #333;" >
				<a style="text-decoration: none;font-size: 14px; color: #25D366;" href="https://api.whatsapp.com/send?phone=23799494380">
					<ion-icon name="logo-whatsapp"></ion-icon>
				</a>
			</ion-col>

			<ion-col col-3 style="text-align: center; border: 1px solid white; background-color: #333;" >
				<a style="text-decoration: none; color: #eb4924;" href="mailto:onanajunior92@gmail.com">
					<ion-icon  md="ios-mail-outline"></ion-icon>
				</a>
			</ion-col>

			<ion-col col-3 style=" text-align: center; border: 1px solid white; background-color: #333;" >
				<a style="text-decoration: none; color:  #efbc29
							;" href="sms:237699494380">
					<ion-icon ios="ios-chatboxes" md="md-chatboxes"></ion-icon>
				</a>
			</ion-col>

		</ion-row>

		<ion-row center style="border-top:1px solid gray;border-bottom: :1px solid gray; height:40px;padding-top:5px;" *ngIf="produit.retailSale.isInPromotion">
			<ion-col col-2 style="font-weight:bold;">
				Prix :
			</ion-col>
			<ion-col center col-8 style="text-align:center;font-weight: bold;font-weight: bold;">
				<span style="font-size:18px; font-weight:bold;">{{produit.retailSale.promotionalPrice | currency:' ':'symbol':'1.0-0'}} FCFA </span > <sub style="text-decoration: line-through; font-size: 12px;" >{{produit.retailSale.price | currency:' ':'symbol':'1.0-0'}}FCFA</sub >	
			</ion-col>
			<ion-col  col-2 style="text-align:right;  ">
			<span style="font-size:12px; height:40px; color:orange; border: 1px solid orange;">-{{(100-produit.retailSale.promotionalPrice/produit.retailSale.price*100) | number:'1.0-0'}}% </span >
			</ion-col>
		</ion-row>

		
		<ion-row *ngIf="otherModels.length >0 && produit.isVirtual" center style="border-top:1px solid gray;border-bottom: :1px solid gray; height:40px;padding-top:5px;">
			<ion-col col-5 style="font-weight:bold;">
				Tailles du produit :
			</ion-col>
			<ion-col center col-7 style="text-align:center;">
				<span  *ngFor="let model of otherModels ; let i = index" >			
					{{model.taille}}
				</span>
			</ion-col>
		</ion-row>

		<ion-row center style="border-top:1px solid gray;border-bottom: :1px solid gray; height:40px;padding-top:5px;">
			<ion-col col-3 style="font-weight:bold;">
				Vendeur :
			</ion-col>
			<ion-col center col-9 style="text-align:center;">
					<span style="color:#416998;" (click)="openVendeur(produit.boutique)" >{{produit.boutique.nom}} </span>
			</ion-col>
		</ion-row>

		<ion-row center style="border-top:1px solid gray;border-bottom: :1px solid gray; height:40px;padding-top:5px;" *ngIf="!produit.retailSale.isInPromotion">
			<ion-col col-4 style="font-weight:bold;">
			Prix :
			</ion-col>
			<ion-col center col-6 style="text-align:center;">
				<span style="font-size:18px; font-weight:bold;">{{produit.retailSale.price | currency:' ':'symbol':'1.0-0'}} FCFA </span >
			</ion-col>
		</ion-row>
		<ion-row center style="border-top:1px solid gray;border-bottom: :1px solid gray; height:40px;padding-top:5px;" *ngIf="produit.BWMSale.length!=0">
		    <ion-col col-4 style="font-weight:bold;">
			Offre #BWM:
			</ion-col>
			<ion-col center col-6 style="text-align:center;font-weight: bold;font-weight: bold;">
				<span style="font-size:18px; font-weight:bold;">{{produit.BWMSale.price}} FCFA </span > <sub style="text-decoration: line-through; font-size: 12px;" >{{produit.retailSale.price | currency:' ':'symbol':'1.0-0'}}FCFA</sub >	
			</ion-col>
			<ion-col  col-2 style="text-align:right;  ">
				<span style="font-size:12px; height:40px; color:orange; border: 1px solid orange;">-{{(100-produit.BWMSale.price/produit.retailSale.price*100) | number:'1.0-0'}}% </span >
			</ion-col>
		</ion-row>
		<ion-row center style="border-bottom:1px solid gray; border-top:1px solid gray; height:40px;padding-top:5px;" >
		    <ion-col col-5 style="color:gray;">
		     <span><ion-icon style="font-size:20px;"  name="star" [ngClass]="{ 'light' : produit.notation.note >= 1}" > </ion-icon></span> <span><ion-icon name="star"  [ngClass]="{ 'light' : produit.notation.note >= 2}" style=";font-size:20px;" ></ion-icon></span> <span><ion-icon name="star"  [ngClass]="{ 'light' : produit.notation.note >= 3}" style="font-size:20px;" > </ion-icon></span> <span><ion-icon name="star"  [ngClass]="{ 'light' : produit.notation.note>=4}" style="font-size:20px;" > </ion-icon></span> <span> <ion-icon name="star"  [ngClass]="{ 'light' : produit.notation.note >= 5}" style="font-size:20px;" > </ion-icon></span> <span style="font-size:12px;"><ion-icon style="font-size:14px;">({{produit.notation.total}})</ion-icon></span>
			</ion-col>
			<ion-col col-7 style="color:#416998;text-align:center;font-size:14px;">
			  <span (click)="showRatingModal()">  Noter/Commenter le produit</span>
			</ion-col>
		</ion-row>

		<ion-row center style="">
			<ion-col center col-12 style="text-align:center;" *ngIf="!produit.isVirtual"
			>
				<ion-item>
					<ion-label>Choisir la quantité:</ion-label>
					<ion-select [(ngModel)]="produit.number"> 
						<ion-option *ngFor="let val of arraySize" value="{{val}}" [selected]="val==produit.number" >{{val}}</ion-option>
				    </ion-select> 
				</ion-item>
			</ion-col>
			
			<ion-col  col-12  >
				<button  [disabled]="produit.quantity==0" color="costom-orange" ion-button block  (click)="addPanier(produit)"> Ajouter dans le panier 
				</button>
				<p *ngIf="produit.quantity==0" style="color:red;text-align: center;font-style: italic; font-size:12px;">Stock épuisé
				</p>
			</ion-col>

			<ion-col center  col-12 style="text-align:center;margin-top:-20px; margin-bottom:10px;">
				<p>
					<button text-wrap ion-button block  style="background-color: #25D366; color:white;" (click)="sendByWhatsApp()"> <ion-icon name="logo-whatsapp" style="margin-right: 3px; font-size: 25px;color: black;" ></ion-icon> Passer votre commande via Whattsapp 
					</button>
				</p>
			</ion-col>
			
		</ion-row>

		<ion-row *ngIf="otherModels.length >0 && (!produit.isVirtual || produit.isVirtual==null) ">
			<ion-col col-12 style="font-weight:bold;">
				Autres modéles du produit
			</ion-col>
			<ion-slides *ngIf="otherModels.length >=3" autoplay="4000"  loop="true" slidesPerView="3" parallax="true" 
						style="background-color:white;  min-height: 200px;">
						<ion-slide  *ngFor="let model of otherModels ; let i = index" style="margin-right:5px; border: 1px solid #f5f5f5;" (click)="changeModel(model.name)">	
							
							<img src="assets/imgs/produit1.jpg" [src]="baseUrl+'image/'+model.idImage" style=""/>
							<p style="margin-top:0px;font-size:12px;color:black; text-align: center; padding: 1px 1px 1px 1px;">{{model.name | limitTo:70}}</p>
						</ion-slide>
			</ion-slides>
			<ion-slides *ngIf="otherModels.length ==2"   loop="true" slidesPerView="2" parallax="true" 
						style="background-color:white;  min-height: 200px;">
						<ion-slide  *ngFor="let model of otherModels ; let i = index" style="margin-right:5px; border: 1px solid #f5f5f5;" (click)="changeModel(model.name)">	
							
							<img src="assets/imgs/produit1.jpg" [src]="baseUrl+'image/'+model.idImage" style=""/>
							<p style="margin-top:0px;font-size:12px;color:black; text-align:center; padding: 1px 1px 1px 1px;">{{model.name | limitTo:70}}</p>
						</ion-slide>
			</ion-slides>
			<ion-slides *ngIf="otherModels.length ==1"   loop="true" slidesPerView="1" parallax="true" 
						style="background-color:white;">
				<ion-slide  *ngFor="let model of otherModels ; let i = index" style="margin-right:5px; border: 1px solid #f5f5f5;" (click)="changeModel(model.name)">	
							
					<img src="assets/imgs/produit1.jpg" [src]="baseUrl+'image/'+model.idImage" style="height:180px;"/>
					<p style="margin-top:0px;font-size:14px;color:black; text-align:center; padding: 1px 1px 1px 1px;">{{model.name | limitTo:70}}
					</p>
				</ion-slide>
			</ion-slides>
		</ion-row>

		
		<ion-row style="background-color:gray;color:white; font-size:16px;">
			<ion-col   col-4 style="text-align:center" [ngClass]="{active: tab==='tab1'}" (click)="changeTab('tab1')" >Details </ion-col>
			<ion-col  col-4 style="text-align:center" [ngClass]="{active: tab==='tab2'}" (click)="changeTab('tab2')" >Caracteristiques</ion-col>
			<ion-col col-4 style="text-align:center" [ngClass]="{active: tab==='tab3'}" (click)="changeTab('tab3')"> Description</ion-col>
		</ion-row>
		
		<ion-row>
			<ion-col col-12 *ngIf="tab=='tab1'" >
				
				<ion-row *ngFor="let detail of produit.detail" style="border-bottom: 1px solid gray;">
					<ion-col col-5 style="color:gray;"> {{detail.name}} : </ion-col>
					<ion-col col-7 style=""> {{detail.value}} </ion-col>
				</ion-row>
				<br/><br/>
			</ion-col>
			<ion-col col-12 *ngIf="tab=='tab2'">
				<ion-row *ngFor="let car of produit.modelCar" style="border-bottom: 1px solid gray;">
					<ion-col col-5 style="color:gray;"> {{car.name}} : </ion-col>
					<ion-col col-7 style=""> {{car.value}} {{car.unity}}  </ion-col>

				</ion-row>
				<ion-row *ngFor="let car of produit.productCar" style="border-bottom: 1px solid gray;">
					<ion-col col-5 style="color:gray;"> {{car.name}} : </ion-col>
					<ion-col col-7 style=""> {{car.value}} {{car.unity}} </ion-col>
				</ion-row>
				<br/><br/> 
			</ion-col >
			<ion-col col-12 *ngIf="tab=='tab3'" >
				<div [innerHtml]="produit.description "></div>
				<br/><br/>
			</ion-col>	
		</ion-row>

	</div>
</ion-content>
